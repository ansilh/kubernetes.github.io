<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=generator content="Relearn 5.23.2+tip"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Kubernetes pocket gude and more"><meta name=author content="Ansil H"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kubernetes.ansilh.com/images/hero.png"><meta name=twitter:title content="YAML Crash course :: Hugo Relearn Theme"><meta name=twitter:description content="Kubernetes pocket gude and more"><meta property="og:title" content="YAML Crash course :: Hugo Relearn Theme"><meta property="og:description" content="Kubernetes pocket gude and more"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.ansilh.com/06-yaml_primer/index.html"><meta property="og:image" content="https://kubernetes.ansilh.com/images/hero.png"><meta property="og:site_name" content="Hugo Relearn Theme"><title>YAML Crash course :: Hugo Relearn Theme</title>
<link href=../images/logo.svg?1704645242 rel=icon type=image/svg+xml><link href=../css/fontawesome-all.min.css?1704645243 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fontawesome-all.min.css?1704645243 rel=stylesheet></noscript><link href=../css/nucleus.css?1704645243 rel=stylesheet><link href=../css/auto-complete.css?1704645243 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/auto-complete.css?1704645243 rel=stylesheet></noscript><link href=../css/perfect-scrollbar.min.css?1704645243 rel=stylesheet><link href=../css/fonts.css?1704645243 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fonts.css?1704645243 rel=stylesheet></noscript><link href=../css/theme.css?1704645243 rel=stylesheet><link href=../css/theme-neon.css?1704645243 rel=stylesheet id=R-variant-style><link href=../css/chroma-neon.css?1704645243 rel=stylesheet id=R-variant-chroma-style><link href=../css/variant.css?1704645243 rel=stylesheet><link href=../css/print.css?1704645243 rel=stylesheet media=print><link href=../css/format-print.css?1704645243 rel=stylesheet><link href=../css/ie.css?1704645243 rel=stylesheet><script src=../js/url.js?1704645243></script><script src=../js/variant.js?1704645243></script><script>window.index_js_url="../index.search.js";var root_url="../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://kubernetes.ansilh.com/",window.relearn.themeVariantModifier="",window.variants&&variants.init(["neon"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><style>#R-body img.bg-white{background-color:#fff}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../06-yaml_primer/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>YAML Crash course</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 6</div><h1 id=yaml-crash-course>YAML Crash course</h1><p>In this session we will learn k8s YAML specification and object types.
We will cover only k8s dependent YAML specification</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of YAML Crash course</h1><article class=default><header class=headline></header><h1 id=exploring-object-specs>Exploring Object Specs</h1><p>So lets discuss about a new command <code>kubectl explain</code> so that we don&rsquo;t have to remember all YAML specs of kubernetes objects.</p><p>With <code>kubectl explain</code> subcommand , you can see the specification of each objects and can use that as a reference to write your <code>YAML</code> files.</p><h4 id=fist-level-spec>Fist level spec</h4><p>We will use <code>kubectl explain Pod</code> command to see the specifications of a Pod YAML.</p><div class="wrap-code highlight"><pre tabindex=0><code>$ kubectl explain Pod</code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0><code>ubuntu@k8s-master-01:~$ kubectl explain pod
KIND:     Pod
VERSION:  v1

DESCRIPTION:
     Pod is a collection of containers that can run on a host. This resource is
     created by clients and scheduled onto hosts.

FIELDS:
   apiVersion	&lt;string&gt;
     APIVersion defines the versioned schema of this representation of an
     object. Servers should convert recognized schemas to the latest internal
     value, and may reject unrecognized values. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md#resources

   kind	&lt;string&gt;
     Kind is a string value representing the REST resource this object
     represents. Servers may infer this from the endpoint the client submits
     requests to. Cannot be updated. In CamelCase. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds

   metadata	&lt;Object&gt;
     Standard object&#39;s metadata. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md#metadata

   spec	&lt;Object&gt;
     Specification of the desired behavior of the pod. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status

   status	&lt;Object&gt;
     Most recently observed status of the pod. This data may not be up to date.
     Populated by the system. Read-only. More info:
     https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status

ubuntu@k8s-master-01:~$</code></pre></div><p>As we discussed earlier , the specification is very familiar.</p><p>Filed <code>status</code> is readonly and its system populated , so we don&rsquo;t have to write anything for <code>status</code>.</p><h4 id=exploring-inner-fields>Exploring inner fields</h4><p>If we want to see the fields available in <code>spec</code> , then execute below command.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl explain pod.spec</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>KIND</span><span class=p>:</span><span class=w>     </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>VERSION</span><span class=p>:</span><span class=w>  </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>RESOURCE</span><span class=p>:</span><span class=w> </span><span class=l>spec &lt;Object&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>DESCRIPTION</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>Specification of the desired behavior of the pod. More info</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=l>PodSpec is a description of a pod.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>FIELDS</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>containers	&lt;[]Object&gt; -required-</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>List of containers belonging to the pod. Containers cannot currently be</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>added or removed. There must be at least one container in a Pod. Cannot be</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=l>updated.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span></span></span></code></pre></div><p>How easy is that.</p><p>As you can see in spec the <code>containers</code> filed is <code>-required-</code> which indicates that this filed is mandatory.</p><p><code>&lt;[]Object></code> indicates that its an array of objects , which means , you can put more than one element under <code>containers</code></p><p>That make sense , because the <code>Pod</code> may contain more than one container.</p><p>In YAML we can use <code>-</code> infront of a filed to mark it as an array element.</p><p>Lets take a look at the YAML that we wrote earlier</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span></span></span></code></pre></div><p>There is a <code>-</code> under the fist filed of the <code>containers</code>.
If we say that in words ; &ldquo;containers is an array object which contains one array element with filed <code>name</code> and <code>image</code>&rdquo;</p><p>If you want to add one more container in Pod , we will add one more array element with needed values.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo-tea</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-tea</span></span></span></code></pre></div><p>Now the Pod have two containers .</p><p>How I know the containers array element need <code>name</code> and <code>image</code> ?</p><p>We will use explain command to get those details.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl explain pod.spec.containers</span></span></code></pre></div><p>Snipped Output</p><div class="wrap-code highlight"><pre tabindex=0><code>...
name	&lt;string&gt; -required-
  Name of the container specified as a DNS_LABEL. Each container in a pod
  must have a unique name (DNS_LABEL). Cannot be updated.

image	&lt;string&gt;
  Docker image name
...</code></pre></div><p>As you can see , <code>name</code> and <code>image</code> are of type <code>string</code> which means , you have to provide a string value to it.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=k8s-yaml-structure>K8S YAML structure</h1><h3 id=what-is-yaml->What is YAML ?</h3><p>Yet Another Markup Language</p><p>Kubernetes YAML have below structure</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>spec:</span></span></span></code></pre></div><h4 id=apiversion>apiVersion:</h4><p>Kubernetes have different versions of API for each objects.
We discuss about API in detail in upcoming sessions.
For now , lets keep it simple as possible.</p><p>Pod is one of the <code>kind</code> of object which is part of core v1 API
So for a Pod, we usually see <code>apiVersion: v1</code></p><h4 id=kind>kind:</h4><p>As explained above we specify the <code>kind</code> of API object with <code>kind:</code> field.</p><h4 id=metadata>metadata:</h4><p>We have seen the use of metadata earlier.</p><p>As the name implies , we usually store name of object and labels in metadata field.</p><h4 id=spec>spec:</h4><p>Object specification will go hear.
The specification will depend on the <code>kind</code> and <code>apiVersion</code> we use</p><h4 id=exploring-pod-spec>Exploring <code>Pod</code> spec</h4><p>Lets write a Pod specification YAML</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app01</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span></span></span></code></pre></div><p>In above specification , you can see that we have specified <code>name</code> and <code>labels</code> in matadata field.</p><p>The <code>spec</code> starts with <code>cotainer</code> field and we have added a container specification under it.</p><p>You might be wondering , how can we memories all these options.
In reality , you don&rsquo;t have to.</p><p>We will discuss about it in next session.</p><footer class=footline></footer></article></section></div></main></div><script src=../js/clipboard.min.js?1704645243 defer></script><script src=../js/perfect-scrollbar.min.js?1704645243 defer></script><script src=../js/theme.js?1704645243 defer></script></body></html>