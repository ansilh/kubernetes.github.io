<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=generator content="Relearn 5.23.2+tip"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Kubernetes pocket gude and more"><meta name=author content="Ansil H"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kubernetes.ansilh.com/images/hero.png"><meta name=twitter:title content="Self Healing - Readiness :: Hugo Relearn Theme"><meta name=twitter:description content="Kubernetes pocket gude and more"><meta property="og:title" content="Self Healing - Readiness :: Hugo Relearn Theme"><meta property="og:description" content="Kubernetes pocket gude and more"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.ansilh.com/03-pods/06-self-healing-readiness/index.html"><meta property="og:image" content="https://kubernetes.ansilh.com/images/hero.png"><meta property="og:site_name" content="Hugo Relearn Theme"><title>Self Healing - Readiness :: Hugo Relearn Theme</title>
<link href=../../images/logo.svg?1704645833 rel=icon type=image/svg+xml><link href=../../css/fontawesome-all.min.css?1704645834 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1704645834 rel=stylesheet></noscript><link href=../../css/nucleus.css?1704645834 rel=stylesheet><link href=../../css/auto-complete.css?1704645834 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1704645834 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1704645834 rel=stylesheet><link href=../../css/fonts.css?1704645834 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1704645834 rel=stylesheet></noscript><link href=../../css/theme.css?1704645834 rel=stylesheet><link href=../../css/theme-neon.css?1704645834 rel=stylesheet id=R-variant-style><link href=../../css/chroma-neon.css?1704645834 rel=stylesheet id=R-variant-chroma-style><link href=../../css/variant.css?1704645834 rel=stylesheet><link href=../../css/print.css?1704645834 rel=stylesheet media=print><link href=../../css/format-print.css?1704645834 rel=stylesheet><link href=../../css/ie.css?1704645834 rel=stylesheet><script src=../../js/url.js?1704645834></script><script src=../../js/variant.js?1704645834></script><script>window.index_js_url="../../index.search.js";var root_url="../../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://kubernetes.ansilh.com/",window.relearn.themeVariantModifier="",window.variants&&variants.init(["neon"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><style>#R-body img.bg-white{background-color:#fff}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../03-pods/06-self-healing-readiness/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../03-pods/index.html><span itemprop=name>Pods & Nodes</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Self Healing - Readiness</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=self-healing---readiness>Self Healing - Readiness</h1><h3 id=readiness-probe>Readiness Probe</h3><p>We have seen that our coffee application was listening on port 9090.
Lets assume that the application is not coming up but Pod status showing running.
Everyone will think that application is up.
You entire application stack might get affected because of this.</p><p>So here comes the question , &ldquo;How can I make sure my application is started, not just the Pod ?&rdquo;</p><p>Here we can use Pod spec, <code>Readiness probe</code>.</p><p>Official detention of readinessProbe is , &ldquo;Periodic probe of container service readiness&rdquo;.</p><p>Lets rewrite the Pod specification of Coffee App and add a readiness Probe.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ vi pod-readiness.yaml</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>9090</span></span></span></code></pre></div><h4 id=apply-yaml>Apply Yaml</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl apply -f pod-readiness.yaml
</span></span><span class=line><span class=cl>pod/coffee-app created</span></span></code></pre></div><h4 id=verify-pod-status>Verify Pod status</h4><p>Try to identify the difference.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS              RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   0/1     ContainerCreating   <span class=m>0</span>          3s
</span></span><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   0/1     Running   <span class=m>0</span>          25s
</span></span><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          32s</span></span></code></pre></div><h4 id=delete-the-pod>Delete the Pod</h4><p>Yes ,we can delete the objects using the same yaml which we used to create/apply it</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl delete -f pod-readiness.yaml
</span></span><span class=line><span class=cl>pod <span class=s2>&#34;coffee-app&#34;</span> deleted
</span></span><span class=line><span class=cl>$</span></span></code></pre></div><h4 id=probe-tuning>Probe Tuning.</h4><div class="wrap-code highlight"><pre tabindex=0><code>failureThreshold     &lt;integer&gt;
  Minimum consecutive failures for the probe to be considered failed after
  having succeeded. Defaults to 3. Minimum value is 1.

initialDelaySeconds  &lt;integer&gt;
  Number of seconds after the container has started before liveness probes
  are initiated. More info:
  https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes

periodSeconds        &lt;integer&gt;
  How often (in seconds) to perform the probe. Default to 10 seconds. Minimum
  value is 1.

timeoutSeconds       &lt;integer&gt;
  Number of seconds after which the probe times out. Defaults to 1 second.
  Minimum value is 1. More info:
  https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes</code></pre></div><footer class=footline></footer></article></div></main></div><script src=../../js/clipboard.min.js?1704645834 defer></script><script src=../../js/perfect-scrollbar.min.js?1704645834 defer></script><script src=../../js/theme.js?1704645834 defer></script></body></html>