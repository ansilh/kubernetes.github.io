<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=generator content="Relearn 5.23.2+tip"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Kubernetes pocket gude and more"><meta name=author content="Ansil H"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kubernetes.ansilh.com/images/hero.png"><meta name=twitter:title content="Pods & Nodes :: Hugo Relearn Theme"><meta name=twitter:description content="Kubernetes pocket gude and more"><meta property="og:title" content="Pods & Nodes :: Hugo Relearn Theme"><meta property="og:description" content="Kubernetes pocket gude and more"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.ansilh.com/03-pods/index.html"><meta property="og:image" content="https://kubernetes.ansilh.com/images/hero.png"><meta property="og:site_name" content="Hugo Relearn Theme"><title>Pods & Nodes :: Hugo Relearn Theme</title>
<link href=../images/logo.svg?1704650113 rel=icon type=image/svg+xml><link href=../css/fontawesome-all.min.css?1704650116 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fontawesome-all.min.css?1704650116 rel=stylesheet></noscript><link href=../css/nucleus.css?1704650116 rel=stylesheet><link href=../css/auto-complete.css?1704650116 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/auto-complete.css?1704650116 rel=stylesheet></noscript><link href=../css/perfect-scrollbar.min.css?1704650116 rel=stylesheet><link href=../css/fonts.css?1704650116 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fonts.css?1704650116 rel=stylesheet></noscript><link href=../css/theme.css?1704650116 rel=stylesheet><link href=../css/theme-neon.css?1704650116 rel=stylesheet id=R-variant-style><link href=../css/chroma-neon.css?1704650116 rel=stylesheet id=R-variant-chroma-style><link href=../css/variant.css?1704650116 rel=stylesheet><link href=../css/print.css?1704650116 rel=stylesheet media=print><link href=../css/format-print.css?1704650116 rel=stylesheet><link href=../css/ie.css?1704650116 rel=stylesheet><script src=../js/url.js?1704650116></script><script src=../js/variant.js?1704650116></script><script>window.index_js_url="../index.search.js";var root_url="../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://kubernetes.ansilh.com/",window.relearn.themeVariantModifier="",window.variants&&variants.init(["neon"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><style>#R-body img.bg-white{background-color:#fff}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../03-pods/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Pods & Nodes</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 3</div><h1 id=pods--nodes>Pods & Nodes</h1><p>In this session , we will explore Pods and Nodes.</p><p>We will also create a <code>Coffee</code> application <code>Pod</code></p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Pods & Nodes</h1><article class=default><header class=headline></header><h1 id=introduction>Introduction</h1><h2 id=what-is-a-pod->What is a Pod ?</h2><p><a href=#R-image-f9c8492165745d8e753bf6e18c9505b5 class=lightbox-link><img src="../03-pods/01-what-is-pod/pods_overview.svg?classes=shadow&amp;width=60pc" alt="Pod Overview" class="figure-image bg-white border lightbox shadow" style=height:auto;width:60pc loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-f9c8492165745d8e753bf6e18c9505b5><img src="../03-pods/01-what-is-pod/pods_overview.svg?classes=shadow&amp;width=60pc" alt="Pod Overview" class="lightbox-image bg-white border lightbox shadow" loading=lazy></a>
A Pod is the basic building block of Kubernetes–the smallest and simplest unit in the Kubernetes object model that you create or deploy. A Pod represents a running process on your cluster</p><p>The “one-container-per-Pod” model is the most common Kubernetes use case; in this case, you can think of a Pod as a wrapper around a single container, and Kubernetes manages the Pods rather than the containers directly.</p><p><a href=#R-image-2f7dec3feb75ac90320c978da87de31d class=lightbox-link><img src="../03-pods/01-what-is-pod/pod.svg?classes=shadow&amp;width=50pc" alt=Pod class="figure-image bg-white border lightbox shadow" style=height:auto;width:50pc loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-2f7dec3feb75ac90320c978da87de31d><img src="../03-pods/01-what-is-pod/pod.svg?classes=shadow&amp;width=50pc" alt=Pod class="lightbox-image bg-white border lightbox shadow" loading=lazy></a></p><p>A Pod might encapsulate an application composed of multiple co-located containers that are tightly coupled and need to share resources. These co-located containers might form a single cohesive unit of service–one container serving files from a shared volume to the public, while a separate “sidecar” container refreshes or updates those files. The Pod wraps these containers and storage resources together as a single manageable entity.</p><h2 id=what-is-a-node>What is a Node?</h2><p><a href=#R-image-439b266450680b6f719146992acd7fa6 class=lightbox-link><img src="../03-pods/01-what-is-pod/nodes.svg?classes=shadow&amp;width=60pc" alt=Node class="figure-image bg-white border lightbox shadow" style=height:auto;width:60pc loading=lazy></a>
<a href=javascript:history.back(); class=lightbox-back id=R-image-439b266450680b6f719146992acd7fa6><img src="../03-pods/01-what-is-pod/nodes.svg?classes=shadow&amp;width=60pc" alt=Node class="lightbox-image bg-white border lightbox shadow" loading=lazy></a>
A Pod always runs on a Node. A Node is a worker machine in Kubernetes and may be either a virtual or a physical machine, depending on the cluster. Each Node is managed by the Master. A Node can have multiple pods, and the Kubernetes master automatically handles scheduling the pods across the Nodes in the cluster. The Master&rsquo;s automatic scheduling takes into account the available resources on each Node.</p><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=create-a-pod---declarative>Create a Pod - Declarative</h1><p>After completing this session , you will be able to create Pod declaratively and will be able to login to check services running on other pods.</p><p>So lets get started.</p><h4 id=lets-check-the-running-pods>Lets Check the running Pods</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods
</span></span><span class=line><span class=cl>No resources found.
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p>Nothing <i class="fa fa-frown"></i></p><h4 id=lets-create-one-using-a-yaml-file>Lets create one using a <code>YAML</code> file</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ vi pod.yaml</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span></span></span></code></pre></div><h4 id=apply-yaml-using-kubectl-command>Apply YAML using <code>kubectl</code> command</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl apply -f pod.yaml</span></span></code></pre></div><h4 id=view-status-of-pod>View status of Pod</h4><p>Pod status is <code>ContainerCreating</code></p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>NAME         READY   STATUS              RESTARTS   AGE
</span></span></span><span class=line><span class=cl><span class=go>coffee-app   0/1     ContainerCreating   0          4s
</span></span></span></code></pre></div><h4 id=execute-kubectl-get-pods-after-some-time>Execute <code>kubectl get pods</code> after some time</h4><p>Now <code>Pod</code> status will change to <code>Running</code></p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>NAME         READY   STATUS    RESTARTS   AGE
</span></span></span><span class=line><span class=cl><span class=go>coffee-app   1/1     Running   0          27s
</span></span></span></code></pre></div><p>Now we can see our first Pod <i class="fa fa-smile-beam"></i></p><h4 id=get-the-ip-address-of-pod>Get the IP address of <code>Pod</code></h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods -o wide</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>NAME         READY   STATUS    RESTARTS   AGE    IP            NODE            NOMINATED NODE   READINESS GATES
</span></span></span><span class=line><span class=cl><span class=go>coffee-app   1/1     Running   0          2m8s   192.168.1.7   k8s-worker-01   &lt;none&gt;           &lt;none&gt;
</span></span></span></code></pre></div><h4 id=create-a-new-centos-container>Create a new CentOS container</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ vi centos-pod.yaml</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>centos-pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>tutum/centos</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>centos</span></span></span></code></pre></div><h4 id=apply-the-yaml-spec>Apply the Yaml spec</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl apply -f centos-pod.yaml</span></span></code></pre></div><h4 id=verify-the-status-of-pod>Verify the status of Pod</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>NAME         READY   STATUS              RESTARTS   AGE
</span></span></span><span class=line><span class=cl><span class=go>centos-pod   0/1     ContainerCreating   0          12s
</span></span></span><span class=line><span class=cl><span class=go>coffee-app   1/1     Running             0          5m31s
</span></span></span></code></pre></div><h4 id=after-some-time-status-will-change-to-running>After some time status will change to Running</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>centos-pod   1/1     Running   <span class=m>0</span>          59s
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          6m18s</span></span></code></pre></div><h4 id=login-to-centos-pod>Login to CentOS Pod</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl <span class=nb>exec</span> -it centos-pod -- /bin/bash</span></span></code></pre></div><h4 id=verify-coffee-app-using-curl>Verify Coffee app using curl</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ curl -s 192.168.1.13:9090  <span class=p>|</span>grep <span class=s1>&#39;Serving&#39;</span></span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;title&gt;&lt;/title&gt;&lt;body&gt;&lt;div&gt; &lt;h2&gt;Serving Coffee from&lt;/h2&gt;&lt;h3&gt;Pod:coffee-app&lt;/h3&gt;&lt;h3&gt;IP:192.168.1.13&lt;/h3&gt;&lt;h3&gt;Node:172.16.0.1&lt;/h3&gt;&lt;img src=&#34;data:image/png;base64,
</span></span></span><span class=line><span class=cl><span class=go></span><span class=gp>[root@centos-pod /]#</span>
</span></span></code></pre></div><h4 id=delete-pod>Delete pod</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl delete pod coffee-app centos-pod</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>pod &#34;coffee-app&#34; deleted
</span></span></span><span class=line><span class=cl><span class=go>pod &#34;centos-pod&#34; deleted
</span></span></span></code></pre></div><h4 id=make-sure-not-pod-is-running>Make sure not pod is running</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods</span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=create-a-pod---imperative>Create a Pod - Imperative</h1><h4 id=execute-kubectl-command-to-create-a-pod>Execute <code>kubectl</code> command to create a Pod.</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl run coffee --image<span class=o>=</span>ansilh/demo-coffee --restart<span class=o>=</span>Never
</span></span><span class=line><span class=cl>pod/coffee created</span></span></code></pre></div><h4 id=verify-pod-status>Verify <code>Pod</code> status</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods -o wide
</span></span><span class=line><span class=cl>NAME     READY   STATUS              RESTARTS   AGE   IP       NODE            NOMINATED NODE   READINESS GATES
</span></span><span class=line><span class=cl>coffee   0/1     ContainerCreating   <span class=m>0</span>          6s    &lt;none&gt;   k8s-worker-01   &lt;none&gt;           &lt;none&gt;
</span></span><span class=line><span class=cl>$ kubectl get pods -o wide
</span></span><span class=line><span class=cl>NAME     READY   STATUS    RESTARTS   AGE   IP             NODE            NOMINATED NODE   READINESS GATES
</span></span><span class=line><span class=cl>coffee   1/1     Running   <span class=m>0</span>          19s   192.168.1.15   k8s-worker-01   &lt;none&gt;           &lt;none&gt;</span></span></code></pre></div><h4 id=start-a-centos-container>Start a CentOS container</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl run centos-pod --image<span class=o>=</span>tutum/centos --restart<span class=o>=</span>Never
</span></span><span class=line><span class=cl>pod/centos-pod created</span></span></code></pre></div><h4 id=verify-status-of-the-pod--it-should-be-in-running>verify status of the Pod ; it should be in Running</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>centos-pod   1/1     Running   <span class=m>0</span>          25s
</span></span><span class=line><span class=cl>coffee       1/1     Running   <span class=m>0</span>          2m10s</span></span></code></pre></div><h4 id=logon-to-centos-pod>Logon to CentOS Pod</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl <span class=nb>exec</span> -it centos-pod -- /bin/bash
</span></span><span class=line><span class=cl><span class=o>[</span>root@centos-pod /<span class=o>]</span><span class=c1>#</span></span></span></code></pre></div><h4 id=verify-coffee-app-status>Verify <code>Coffee</code> App status</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>root@centos-pod /<span class=o>]</span><span class=c1># curl -s 192.168.1.15:9090 |grep &#39;Serving Coffee&#39;</span>
</span></span><span class=line><span class=cl>&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;title&gt;&lt;/title&gt;&lt;body&gt;&lt;div&gt; &lt;h2&gt;Serving Coffee from&lt;/h2&gt;&lt;h3&gt;Pod:coffee&lt;/h3&gt;&lt;h3&gt;IP:192.168.1.15&lt;/h3&gt;&lt;h3&gt;Node:172.16.0.1&lt;/h3&gt;&lt;img <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;data:image/png;base64,
</span></span></span><span class=line><span class=cl><span class=s2>[root@centos-pod /]# exit</span></span></span></code></pre></div><h4 id=delete-pod>Delete pod</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl delete pod coffee centos-pod
</span></span><span class=line><span class=cl>pod <span class=s2>&#34;coffee&#34;</span> deleted
</span></span><span class=line><span class=cl>pod <span class=s2>&#34;centos-pod&#34;</span> deleted
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods
</span></span><span class=line><span class=cl>No resources found.
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=nodes>Nodes</h1><p>In this session , we will explore the node details</p><h4 id=list-nodes>List nodes</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ k8s@k8s-master-01:~$ kubectl get nodes</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>NAME            STATUS   ROLES    AGE   VERSION
</span></span></span><span class=line><span class=cl><span class=go>k8s-master-01   Ready    master   38h   v1.13.1
</span></span></span><span class=line><span class=cl><span class=go>k8s-worker-01   Ready    &lt;none&gt;   38h   v1.13.1
</span></span></span></code></pre></div><h4 id=extended-listing>Extended listing</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get nodes -o wide</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0><code>NAME            STATUS   ROLES    AGE   VERSION   INTERNAL-IP      EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME
k8s-master-01   Ready    master   38h   v1.13.1   192.168.56.201   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-131-generic   docker://18.9.0
k8s-worker-01   Ready    &lt;none&gt;   38h   v1.13.1   192.168.56.202   &lt;none&gt;        Ubuntu 16.04.5 LTS   4.4.0-131-generic   docker://18.9.0
k8s@k8s-master-01:~$</code></pre></div><h4 id=details-on-a-node>Details on a node</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl describe node k8s-master-01</span></span></code></pre></div><p>Output</p><div class="wrap-code highlight"><pre tabindex=0><code>Name:               k8s-master-01
Roles:              master
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/hostname=k8s-master-01
                    node-role.kubernetes.io/master=
Annotations:        kubeadm.alpha.kubernetes.io/cri-socket: /var/run/dockershim.sock
                    node.alpha.kubernetes.io/ttl: 0
                    projectcalico.org/IPv4Address: 192.168.56.201/24
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Mon, 31 Dec 2018 02:10:05 +0530
Taints:             node-role.kubernetes.io/master:NoSchedule
Unschedulable:      false
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  MemoryPressure   False   Tue, 01 Jan 2019 17:01:28 +0530   Mon, 31 Dec 2018 02:10:02 +0530   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Tue, 01 Jan 2019 17:01:28 +0530   Mon, 31 Dec 2018 02:10:02 +0530   KubeletHasNoDiskPressure     kubelet has no disk pressure
  PIDPressure      False   Tue, 01 Jan 2019 17:01:28 +0530   Mon, 31 Dec 2018 02:10:02 +0530   KubeletHasSufficientPID      kubelet has sufficient PID available
  Ready            True    Tue, 01 Jan 2019 17:01:28 +0530   Mon, 31 Dec 2018 22:59:35 +0530   KubeletReady                 kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:  192.168.56.201
  Hostname:    k8s-master-01
Capacity:
 cpu:                1
 ephemeral-storage:  49732324Ki
 hugepages-2Mi:      0
 memory:             2048168Ki
 pods:               110
Allocatable:
 cpu:                1
 ephemeral-storage:  45833309723
 hugepages-2Mi:      0
 memory:             1945768Ki
 pods:               110
System Info:
 Machine ID:                 96cedf74a821722b0df5ee775c291ea2
 System UUID:                90E04905-218D-4673-A911-9676A65B07C5
 Boot ID:                    14201246-ab82-421e-94f6-ff0d8ad3ba54
 Kernel Version:             4.4.0-131-generic
 OS Image:                   Ubuntu 16.04.5 LTS
 Operating System:           linux
 Architecture:               amd64
 Container Runtime Version:  docker://18.9.0
 Kubelet Version:            v1.13.1
 Kube-Proxy Version:         v1.13.1
PodCIDR:                     192.168.0.0/24
Non-terminated Pods:         (6 in total)
  Namespace                  Name                                     CPU Requests  CPU Limits  Memory Requests  Memory Limits  AGE
  ---------                  ----                                     ------------  ----------  ---------------  -------------  ---
  kube-system                calico-node-nkcrd                        250m (25%)    0 (0%)      0 (0%)           0 (0%)         38h
  kube-system                etcd-k8s-master-01                       0 (0%)        0 (0%)      0 (0%)           0 (0%)         38h
  kube-system                kube-apiserver-k8s-master-01             250m (25%)    0 (0%)      0 (0%)           0 (0%)         38h
  kube-system                kube-controller-manager-k8s-master-01    200m (20%)    0 (0%)      0 (0%)           0 (0%)         38h
  kube-system                kube-proxy-tzznm                         0 (0%)        0 (0%)      0 (0%)           0 (0%)         38h
  kube-system                kube-scheduler-k8s-master-01             100m (10%)    0 (0%)      0 (0%)           0 (0%)         38h
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource           Requests    Limits
  --------           --------    ------
  cpu                800m (80%)  0 (0%)
  memory             0 (0%)      0 (0%)
  ephemeral-storage  0 (0%)      0 (0%)
Events:              &lt;none&gt;</code></pre></div><p>We will discuss more about each of the fields on upcoming sessions.
For now lets discuss about <code>Non-terminated Pods</code> field;</p><h4 id=non-terminated-pods-field>Non-terminated Pods field</h4><ul><li>Namespace : The namespace which the Pods were running .
The pods that we create will by default go to <code>default</code> namespace.</li><li>Name : Name of the Pod</li><li>CPU Request : How much CPU resource requested by Pod during startup.</li><li>CPU Limits : How much CPU the Pod can use.</li><li>Memory Request : How much memory requested by Pod during startup.</li><li>Memory Limits : How much memory the Pod can use.</li></ul><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=namespaces>Namespaces</h1><h4 id=what-is-a-namespace>What is a namespace</h4><p>We have see namespaces in Linux , which ideally isolates objects and here also the concept is same but serves a different purpose.
Suppose you have two departments in you organization and both departments have application which needs more fine grained control.
We can use namespaces to separate the workload of each departments.</p><p>By default kubernetes will have three namespace</p><h4 id=list-namespace>List namespace</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get ns
</span></span><span class=line><span class=cl>NAME          STATUS   AGE
</span></span><span class=line><span class=cl>default       Active   39h
</span></span><span class=line><span class=cl>kube-public   Active   39h
</span></span><span class=line><span class=cl>kube-system   Active   39h</span></span></code></pre></div><p>default : All Pods that we manually create will go to this namespace (There are ways to change it , but for now that is what it is).
kube-public : All common workloads can be assigned to this namespace . Most of the time no-one use it.
kube-system : Kubernetes specific Pods will be running on this namespace</p><h4 id=list-pods-in-kube-system-namespace>List Pods in kube-system namespace</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods --namespace<span class=o>=</span>kube-system
</span></span><span class=line><span class=cl>NAME                                    READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>calico-node-n99tb                       2/2     Running   <span class=m>0</span>          38h
</span></span><span class=line><span class=cl>calico-node-nkcrd                       2/2     Running   <span class=m>0</span>          38h
</span></span><span class=line><span class=cl>coredns-86c58d9df4-4c22l                1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>coredns-86c58d9df4-b49c2                1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>etcd-k8s-master-01                      1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>kube-apiserver-k8s-master-01            1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>kube-controller-manager-k8s-master-01   1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>kube-proxy-s6hc4                        1/1     Running   <span class=m>0</span>          38h
</span></span><span class=line><span class=cl>kube-proxy-tzznm                        1/1     Running   <span class=m>0</span>          39h
</span></span><span class=line><span class=cl>kube-scheduler-k8s-master-01            1/1     Running   <span class=m>0</span>          39h</span></span></code></pre></div><p>As you can see , there are many Pods running in <code>kube-system</code> namespace
All these Pods were running with one or mode containers
If you see the <code>calico-node-n99tb</code> pod , the <code>READY</code> says 2/2 , which means two containers were running fine in this Pod</p><h4 id=list-all-resources-in-a-namespace>List all resources in a namespace</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get all -n kube-system
</span></span><span class=line><span class=cl>NAME                                        READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>pod/calico-node-kr5xg                       2/2     Running   <span class=m>0</span>          13m
</span></span><span class=line><span class=cl>pod/calico-node-lcpbw                       2/2     Running   <span class=m>0</span>          13m
</span></span><span class=line><span class=cl>pod/coredns-86c58d9df4-h8pjr                1/1     Running   <span class=m>6</span>          26m
</span></span><span class=line><span class=cl>pod/coredns-86c58d9df4-xj24c                1/1     Running   <span class=m>6</span>          26m
</span></span><span class=line><span class=cl>pod/etcd-k8s-master-01                      1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>pod/kube-apiserver-k8s-master-01            1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>pod/kube-controller-manager-k8s-master-01   1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>pod/kube-proxy-fl7rj                        1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>pod/kube-proxy-q6w9l                        1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>pod/kube-scheduler-k8s-master-01            1/1     Running   <span class=m>0</span>          26m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT<span class=o>(</span>S<span class=o>)</span>         AGE
</span></span><span class=line><span class=cl>service/calico-typha   ClusterIP   172.16.244.140   &lt;none&gt;        5473/TCP        13m
</span></span><span class=line><span class=cl>service/kube-dns       ClusterIP   172.16.0.10      &lt;none&gt;        53/UDP,53/TCP   27m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                         DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                 AGE
</span></span><span class=line><span class=cl>daemonset.apps/calico-node   <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           beta.kubernetes.io/os<span class=o>=</span>linux   13m
</span></span><span class=line><span class=cl>daemonset.apps/kube-proxy    <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       <span class=m>2</span>            <span class=m>2</span>           &lt;none&gt;                        27m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                           READY   UP-TO-DATE   AVAILABLE   AGE
</span></span><span class=line><span class=cl>deployment.apps/calico-typha   0/0     <span class=m>0</span>            <span class=m>0</span>           13m
</span></span><span class=line><span class=cl>deployment.apps/coredns        2/2     <span class=m>2</span>            <span class=m>2</span>           27m
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME                                      DESIRED   CURRENT   READY   AGE
</span></span><span class=line><span class=cl>replicaset.apps/calico-typha-5fc4874c76   <span class=m>0</span>         <span class=m>0</span>         <span class=m>0</span>       13m
</span></span><span class=line><span class=cl>replicaset.apps/coredns-86c58d9df4        <span class=m>2</span>         <span class=m>2</span>         <span class=m>2</span>       26m
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=self-healing---readiness>Self Healing - Readiness</h1><h3 id=readiness-probe>Readiness Probe</h3><p>We have seen that our coffee application was listening on port 9090.
Lets assume that the application is not coming up but Pod status showing running.
Everyone will think that application is up.
You entire application stack might get affected because of this.</p><p>So here comes the question , &ldquo;How can I make sure my application is started, not just the Pod ?&rdquo;</p><p>Here we can use Pod spec, <code>Readiness probe</code>.</p><p>Official detention of readinessProbe is , &ldquo;Periodic probe of container service readiness&rdquo;.</p><p>Lets rewrite the Pod specification of Coffee App and add a readiness Probe.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ vi pod-readiness.yaml</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>9090</span></span></span></code></pre></div><h4 id=apply-yaml>Apply Yaml</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl apply -f pod-readiness.yaml
</span></span><span class=line><span class=cl>pod/coffee-app created</span></span></code></pre></div><h4 id=verify-pod-status>Verify Pod status</h4><p>Try to identify the difference.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS              RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   0/1     ContainerCreating   <span class=m>0</span>          3s
</span></span><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   0/1     Running   <span class=m>0</span>          25s
</span></span><span class=line><span class=cl>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          32s</span></span></code></pre></div><h4 id=delete-the-pod>Delete the Pod</h4><p>Yes ,we can delete the objects using the same yaml which we used to create/apply it</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl delete -f pod-readiness.yaml
</span></span><span class=line><span class=cl>pod <span class=s2>&#34;coffee-app&#34;</span> deleted
</span></span><span class=line><span class=cl>$</span></span></code></pre></div><h4 id=probe-tuning>Probe Tuning.</h4><div class="wrap-code highlight"><pre tabindex=0><code>failureThreshold     &lt;integer&gt;
  Minimum consecutive failures for the probe to be considered failed after
  having succeeded. Defaults to 3. Minimum value is 1.

initialDelaySeconds  &lt;integer&gt;
  Number of seconds after the container has started before liveness probes
  are initiated. More info:
  https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes

periodSeconds        &lt;integer&gt;
  How often (in seconds) to perform the probe. Default to 10 seconds. Minimum
  value is 1.

timeoutSeconds       &lt;integer&gt;
  Number of seconds after which the probe times out. Defaults to 1 second.
  Minimum value is 1. More info:
  https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle#container-probes</code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=self-healing---liveness>Self Healing - Liveness</h1><h3 id=liveness-probe>Liveness Probe</h3><p>Lets assume the application failed after readiness probe execution completes
Again we are back to service unavailability</p><p>To avoid this , we need a liveness check which will do a periodic health check after Pod start running or readiness probe completes.</p><p>Lets rewrite the Pod specification of Coffee App and add a liveness Probe.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ vi pod-liveiness.yaml</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>9090</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>     </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>9090</span></span></span></code></pre></div><h4 id=create-pod>Create <code>Pod</code></h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl create -f pod-liveness.yaml</span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=resource-allocation>Resource Allocation</h1><h3 id=limits>Limits</h3><p>We can limit the CPU and Memory usage of a container so that one</p><p>Lets create the coffee Pod again with CPU and Memory limits</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-limits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>CPU</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>Memory</span><span class=p>:</span><span class=w> </span><span class=l>123Mi</span></span></span></code></pre></div><p>Resulting container will be allowed to use 100 millicores and 123 mebibyte (<code>~128</code> Megabytes)</p><h4 id=cpu>CPU</h4><p>One CPU core is equivalent to <code>1000m</code> (one thousand millicpu or one thousand millicores)
CPU is always expressed as an absolute quantity, never as a relative quantity; 0.1 is the same amount of <code>CPU</code> on a single-core, dual-core, or 48-core machine</p><h4 id=memory>Memory</h4><p>You can express memory as a plain integer or as a fixed-point integer using one of these suffixes: <code>E, P, T, G, M, K</code>. You can also use the power-of-two equivalents: <code>Ei, Pi, Ti, Gi, Mi, Ki</code>. For example, the following represent roughly the same value:</p><div class="wrap-code highlight"><pre tabindex=0><code class=language-cosole data-lang=cosole>128974848, 129e6, 129M, 123Mi</code></pre></div><h4 id=mebibyte-vs-megabyte>Mebibyte vs Megabyte</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>1 Megabyte (MB) = (1000)^2 bytes = 1000000 bytes.
</span></span></span><span class=line><span class=cl><span class=go>1 Mebibyte (MiB) = (1024)^2 bytes = 1048576 bytes.
</span></span></span></code></pre></div><h3 id=requests>Requests</h3><p>We can request a specific amount of CPU and Memory when the container starts up.</p><p>Suppose if the Java application need at least <code>128MB</code> of memory during startup , we can use resource request in Pod spec.</p><p>This will help the scheduler to select a node with enough memory.</p><p>Request also can be made of <code>CPU</code> as well.</p><p>Lets modify the <code>Pod</code> spec and add <code>request</code></p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Pod</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee-limits</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>ansilh/demo-coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>coffee</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>CPU</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>Memory</span><span class=p>:</span><span class=w> </span><span class=l>123Mi</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>CPU</span><span class=p>:</span><span class=w> </span><span class=l>200m</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>Memory</span><span class=p>:</span><span class=w> </span><span class=l>244Mi</span></span></span></code></pre></div><h3 id=extra>Extra</h3><p>Once you complete the training , you can visit below URLs to understand storage and network limits.</p><p><a href=https://kubernetes.io/docs/tasks/administer-cluster/limit-storage-consumption/ target=_blank>Storage Limit</a></p><p><a href=https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/#support-traffic-shaping target=_blank>Network bandwidth usage</a></p><footer class=footline></footer></article></section></div></main></div><script src=../js/clipboard.min.js?1704650116 defer></script><script src=../js/perfect-scrollbar.min.js?1704650116 defer></script><script src=../js/theme.js?1704650116 defer></script></body></html>