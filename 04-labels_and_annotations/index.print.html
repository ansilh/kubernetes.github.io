<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=generator content="Relearn 5.23.2+tip"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Kubernetes pocket gude and more"><meta name=author content="Ansil H"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kubernetes.ansilh.com/images/hero.png"><meta name=twitter:title content="Labels & Annotations :: Hugo Relearn Theme"><meta name=twitter:description content="Kubernetes pocket gude and more"><meta property="og:title" content="Labels & Annotations :: Hugo Relearn Theme"><meta property="og:description" content="Kubernetes pocket gude and more"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.ansilh.com/04-labels_and_annotations/index.html"><meta property="og:image" content="https://kubernetes.ansilh.com/images/hero.png"><meta property="og:site_name" content="Hugo Relearn Theme"><title>Labels & Annotations :: Hugo Relearn Theme</title>
<link href=../images/favicon.png?1704656418 rel=icon type=image/png><link href=../css/fontawesome-all.min.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fontawesome-all.min.css?1704656421 rel=stylesheet></noscript><link href=../css/nucleus.css?1704656421 rel=stylesheet><link href=../css/auto-complete.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/auto-complete.css?1704656421 rel=stylesheet></noscript><link href=../css/perfect-scrollbar.min.css?1704656421 rel=stylesheet><link href=../css/fonts.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../css/fonts.css?1704656421 rel=stylesheet></noscript><link href=../css/theme.css?1704656421 rel=stylesheet><link href=../css/theme-neon.css?1704656421 rel=stylesheet id=R-variant-style><link href=../css/chroma-neon.css?1704656421 rel=stylesheet id=R-variant-chroma-style><link href=../css/variant.css?1704656421 rel=stylesheet><link href=../css/print.css?1704656421 rel=stylesheet media=print><link href=../css/format-print.css?1704656421 rel=stylesheet><link href=../css/ie.css?1704656421 rel=stylesheet><script src=../js/url.js?1704656421></script><script src=../js/variant.js?1704656421></script><script>window.index_js_url="../index.search.js";var root_url="../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://kubernetes.ansilh.com/",window.relearn.themeVariantModifier="",window.variants&&variants.init(["neon"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><style>#R-body img.bg-white{background-color:#fff}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../04-labels_and_annotations/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Labels & Annotations</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable chapter narrow" tabindex=-1><div class=flex-block-wrapper><article class=chapter><header class=headline></header><div class=article-subheading>Chapter 4</div><h1 id=labels--annotations>Labels & Annotations</h1><p>In this session , we will discuss the role of Labels and Annotations , also its role in fundamental k8s design.</p><footer class=footline></footer></article><section><h1 class=a11y-only>Subsections of Labels & Annotations</h1><article class=default><header class=headline></header><h1 id=annotations>Annotations</h1><h3 id=why-we-need-annotations->Why we need annotations ?</h3><p>We can use either labels or annotations to attach metadata to Kubernetes objects. Labels can be used to select objects and to find collections of objects that satisfy certain conditions. In contrast, annotations are not used to identify and select objects. The metadata in an annotation can be small or large, structured or unstructured, and can include characters not permitted by labels.</p><p>Its just a place to store more metadata which is not used for any selection , grouping or operations.</p><h4 id=annotate-pod>Annotate Pod</h4><p>Lets say , if you want to add a download URL to pod.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ kubectl annotate pod coffee-app <span class=nv>url</span><span class=o>=</span>https://hub.docker.com/r/ansilh/demo-webapp
</span></span><span class=line><span class=cl>pod/coffee-app annotated</span></span></code></pre></div><h4 id=view-annotations>View annotations</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>k8s@k8s-master-01:~$ kubectl describe pod coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Name</span><span class=p>:</span><span class=w>               </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Namespace</span><span class=p>:</span><span class=w>          </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Priority</span><span class=p>:</span><span class=w>           </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>PriorityClassName</span><span class=p>:</span><span class=w>  </span><span class=l>&lt;none&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Node</span><span class=p>:</span><span class=w>               </span><span class=l>k8s-worker-01/192.168.56.202</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Start Time</span><span class=p>:</span><span class=w>         </span><span class=l>Fri, 04 Jan 2019 00:47:10 +0530</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Labels</span><span class=p>:</span><span class=w>             </span><span class=l>app=frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=l>run=coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Annotations:        cni.projectcalico.org/podIP</span><span class=p>:</span><span class=w> </span><span class=m>10.10.1.11</span><span class=l>/32</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>https://hub.docker.com/r/ansilh/demo-webapp</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Status</span><span class=p>:</span><span class=w>             </span><span class=l>Running</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>IP</span><span class=p>:</span><span class=w>                 </span><span class=m>10.10.1.11</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span></span></span></code></pre></div><p><code>Annotations</code> filed containe two entries</p><p><code>cni.projectcalico.org/podIP: 10.10.1.11/32</code></p><p><code>url: https://hub.docker.com/r/ansilh/demo-webapp</code></p><h4 id=remove-annotation>Remove annotation</h4><p>Use same annotate command and mention only key with a dash (-) at the end of the key .
Below command will remove the annotation <code>url: https://hub.docker.com/r/ansilh/demo-webapp</code> from Pod.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl annotate pod coffee-app url-
</span></span><span class=line><span class=cl>pod/coffee-app annotated
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p><code>Annotation</code> after removal.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=l>k8s@k8s-master-01:~$ kubectl describe pod coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Name</span><span class=p>:</span><span class=w>               </span><span class=l>coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Namespace</span><span class=p>:</span><span class=w>          </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Priority</span><span class=p>:</span><span class=w>           </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>PriorityClassName</span><span class=p>:</span><span class=w>  </span><span class=l>&lt;none&gt;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Node</span><span class=p>:</span><span class=w>               </span><span class=l>k8s-worker-01/192.168.56.202</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Start Time</span><span class=p>:</span><span class=w>         </span><span class=l>Fri, 04 Jan 2019 00:47:10 +0530</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Labels</span><span class=p>:</span><span class=w>             </span><span class=l>app=frontend</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                    </span><span class=l>run=coffee-app</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Annotations:        cni.projectcalico.org/podIP</span><span class=p>:</span><span class=w> </span><span class=m>10.10.1.11</span><span class=l>/32</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>Status</span><span class=p>:</span><span class=w>             </span><span class=l>Running</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>IP</span><span class=p>:</span><span class=w>                 </span><span class=m>10.10.1.11</span></span></span></code></pre></div><footer class=footline></footer></article><article class=default><header class=headline></header><h1 id=labels>Labels</h1><h3 id=why-we-need-labels->Why we need labels ?</h3><p>If you have a bucket of white dominos and you want to group it based on the number of dots.</p><p>Lets say we want all dominos with 10 dots; we will take domino one by one and if its having 10 dots ,we will put it aside and continue the same operation until all dominos were checked.</p><p>Likewise , suppose if you have 100 pods and few of them are nginx and few of them are centos , how we can see only nginx pods ?</p><p>We need a label on each pod so that we can tell <code>kubectl</code> command to show the pods with that label.</p><p>In kubernetes , label is a key value pair and it provides &lsquo;identifying metadata&rsquo; for objects.
These are fundamental qualities of objects that will be used for grouping , viewing and operating.</p><p>For now we will se how we can view them (Will discuss about grouping and operation on pod groups later)</p><h4 id=pod-labels>Pod labels</h4><p>Lets run a Coffee app Pod</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl run coffee-app --image<span class=o>=</span>ansilh/demo-coffee --restart<span class=o>=</span>Never
</span></span><span class=line><span class=cl>pod/coffee-app created
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          4s
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><h4 id=see-the-labels-of-a-pods>See the labels of a Pods</h4><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods --show-labels
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE   LABELS
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          37s   <span class=nv>run</span><span class=o>=</span>coffee-app
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p>As you can see above , the lables is <code>run=coffee-app</code> which is a key value pair - <code>key</code> is <code>run</code> <code>value</code> is <code>coffee-app</code>.
When we run Pod imperatively , <code>kubectl</code> ass this label to Pod.</p><h4 id=add-custom-label-to-pod>Add custom label to Pod</h4><p>We can add label to Pod using <code>kubectl label</code> command.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl label pod coffee-app <span class=nv>app</span><span class=o>=</span>frontend
</span></span><span class=line><span class=cl>pod/coffee-app labeled
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p>Here we have add a label <code>app=frontend</code> to pod <code>coffee-app</code>.</p><h4 id=use-label-selectors>Use label selectors</h4><p>Lets start another coffee application pod with name coffee-app02.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl run coffee-app02 --image<span class=o>=</span>ansilh/demo-coffee --restart<span class=o>=</span>Never
</span></span><span class=line><span class=cl>pod/coffee-app02 created
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p>Now we have two Pods.</p><div class="wrap-code highlight"><pre tabindex=0><code>k8s@k8s-master-01:~$ kubectl get pods --show-labels
NAME           READY   STATUS    RESTARTS   AGE    LABELS
coffee-app     1/1     Running   0          5m5s   app=frontend,run=coffee-app
coffee-app02   1/1     Running   0          20s    run=coffee-app02
k8s@k8s-master-01:~$</code></pre></div><p>Lets see how can I select the Pods with label app=frontend.</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods --selector<span class=o>=</span><span class=nv>app</span><span class=o>=</span>frontend
</span></span><span class=line><span class=cl>NAME         READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>coffee-app   1/1     Running   <span class=m>0</span>          6m52s
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><p>You can add as many as label you want.</p><p>We can add a prefix like <code>app</code> ( eg: <code>app/dev=true</code> ) which is also a valid label.</p><table><thead><tr><th>Limitations</th><th></th></tr></thead><tbody><tr><td>Prefix</td><td>DNS subdomain with 256 characters</td></tr><tr><td>Key</td><td>63 characters</td></tr><tr><td>Value</td><td>63 characters</td></tr></tbody></table><h4 id=remove-labels>Remove labels</h4><p>See the labels of coffee-app</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods --show-labels
</span></span><span class=line><span class=cl>NAME           READY   STATUS    RESTARTS   AGE   LABELS
</span></span><span class=line><span class=cl>coffee-app     1/1     Running   <span class=m>0</span>          28m   <span class=nv>app</span><span class=o>=</span>frontend,run<span class=o>=</span>coffee-app
</span></span><span class=line><span class=cl>coffee-app02   1/1     Running   <span class=m>0</span>          24m   <span class=nv>run</span><span class=o>=</span>coffee-app02</span></span></code></pre></div><p>Remove the <code>app</code> label</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl label pod coffee-app app-
</span></span><span class=line><span class=cl>pod/coffee-app labeled</span></span></code></pre></div><p>Resulting output</p><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>k8s@k8s-master-01:~$ kubectl get pods --show-labels
</span></span><span class=line><span class=cl>NAME           READY   STATUS    RESTARTS   AGE   LABELS
</span></span><span class=line><span class=cl>coffee-app     1/1     Running   <span class=m>0</span>          29m   <span class=nv>run</span><span class=o>=</span>coffee-app
</span></span><span class=line><span class=cl>coffee-app02   1/1     Running   <span class=m>0</span>          24m   <span class=nv>run</span><span class=o>=</span>coffee-app02
</span></span><span class=line><span class=cl>k8s@k8s-master-01:~$</span></span></code></pre></div><footer class=footline></footer></article></section></div></main></div><script src=../js/clipboard.min.js?1704656421 defer></script><script src=../js/perfect-scrollbar.min.js?1704656421 defer></script><script src=../js/theme.js?1704656421 defer></script></body></html>