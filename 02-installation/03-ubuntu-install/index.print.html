<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.121.1"><meta name=generator content="Relearn 5.23.2+tip"><meta name=robots content="noindex, nofollow, noarchive, noimageindex"><meta name=description content="Kubernetes pocket gude and more"><meta name=author content="Ansil H"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://kubernetes.ansilh.com/images/hero.png"><meta name=twitter:title content="Ubuntu 16.04 Installation :: Hugo Relearn Theme"><meta name=twitter:description content="Kubernetes pocket gude and more"><meta property="og:title" content="Ubuntu 16.04 Installation :: Hugo Relearn Theme"><meta property="og:description" content="Kubernetes pocket gude and more"><meta property="og:type" content="website"><meta property="og:url" content="https://kubernetes.ansilh.com/02-installation/03-ubuntu-install/index.html"><meta property="og:image" content="https://kubernetes.ansilh.com/images/hero.png"><meta property="og:site_name" content="Hugo Relearn Theme"><title>Ubuntu 16.04 Installation :: Hugo Relearn Theme</title>
<link href=../../images/favicon.png?1704656418 rel=icon type=image/png><link href=../../css/fontawesome-all.min.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1704656421 rel=stylesheet></noscript><link href=../../css/nucleus.css?1704656421 rel=stylesheet><link href=../../css/auto-complete.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1704656421 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1704656421 rel=stylesheet><link href=../../css/fonts.css?1704656421 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1704656421 rel=stylesheet></noscript><link href=../../css/theme.css?1704656421 rel=stylesheet><link href=../../css/theme-neon.css?1704656421 rel=stylesheet id=R-variant-style><link href=../../css/chroma-neon.css?1704656421 rel=stylesheet id=R-variant-chroma-style><link href=../../css/variant.css?1704656421 rel=stylesheet><link href=../../css/print.css?1704656421 rel=stylesheet media=print><link href=../../css/format-print.css?1704656421 rel=stylesheet><link href=../../css/ie.css?1704656421 rel=stylesheet><script src=../../js/url.js?1704656421></script><script src=../../js/variant.js?1704656421></script><script>window.index_js_url="../../index.search.js";var root_url="../../",baseUri=root_url.replace(/\/$/,"");window.relearn=window.relearn||{},window.relearn.baseUriFull="https://kubernetes.ansilh.com/",window.relearn.themeVariantModifier="",window.variants&&variants.init(["neon"]),window.T_Copy_to_clipboard=`Copy to clipboard`,window.T_Copied_to_clipboard=`Copied to clipboard!`,window.T_Copy_link_to_clipboard=`Copy link to clipboard`,window.T_Link_copied_to_clipboard=`Copied link to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`</script><style>#R-body img.bg-white{background-color:#fff}</style></head><body class="mobile-support print disableInlineCopyToClipboard" data-url=../../02-installation/03-ubuntu-install/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><button class=topbar-control onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../02-installation/index.html><span itemprop=name>Installation</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Ubuntu 16.04 Installation</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=ubuntu-1604-installation>Ubuntu 16.04 Installation</h1><ul><li>Download Ubuntu 16.04 ISO
<a href=http://releases.ubuntu.com/16.04/ubuntu-16.04.5-server-amd64.iso target=_blank>http://releases.ubuntu.com/16.04/ubuntu-16.04.5-server-amd64.iso</a></li></ul><p>Create a template VM which will be used to clone all needed VMs</p><ul><li>You need at least 50GB free space to host all VMs</li><li>All VMs will be placed in a directory called (Don&rsquo;t create these manually now!)
<code>DRIVE_NAME:/VMs/</code> (Replace <code>DRIVE_NAME</code> with a mount point or Driver name)</li><li>Install Ubuntu 16.04 with latest patches</li><li>VM configuration<ul><li>VM Name : <code>k8s-master-01</code></li><li>Memory : 2 GB</li><li>CPU : 2</li><li>Disk : 100GB</li><li>HostOnly interface : 1 (ref. step 1).</li><li>NAT network interface : 1</li></ul></li></ul><div class="box notices cstyle warning"><div class=box-label><i class="fa-fw fas fa-exclamation-triangle"></i> Warning</div><div class=box-content><p>By default , NAT will be the first in network adapter order , change it.
NAT interface should be the second interface and
Host-Only should be the first one</p></div></div><ul><li><p>Install Ubuntu on this VM and go ahead with all default options</p></li><li><p>When asked, provide user name <code>k8s</code> and set password</p></li><li><p>Make sure to select the NAT interface as primary during installation.</p></li><li><p>Select below in <code>Software Selection</code> screen</p></li><li><p>Manual Software Selection</p></li><li><p>OpenSSH Server</p></li><li><p>After restart , make sure NAT interface is up</p></li><li><p>Login to the template VM with user <code>k8s</code> and execute below commands to install latest patches.</p></li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo apt-get update
</span></span><span class=line><span class=cl>$ sudo apt-get upgrade</span></span></code></pre></div><ul><li>Poweroff template VM</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo poweroff</span></span></code></pre></div><h4 id=clone-vm>Clone VM</h4><p>You may use VirtualBox GUI to create a full clone - Preferred
You can use below commands to clone a VM - Execute it at your own risk ;)</p><ul><li>Open CMD and execute below commands to create all needed VMs.
You can replace the value of <code>DRIVER_NAME</code> with a drive which is having enough free space (~50GB)</li><li>Windows</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl> <span class=nb>set</span> <span class=nv>DRIVE_NAME</span><span class=o>=</span>D
</span></span><span class=line><span class=cl> <span class=nb>cd</span> C:<span class=se>\P</span>rogram Files<span class=se>\O</span>racle<span class=se>\V</span>irtualBox
</span></span><span class=line><span class=cl> VBoxManage.exe clonevm <span class=s2>&#34;k8s-master-01&#34;</span> --name <span class=s2>&#34;k8s-worker-01&#34;</span> --groups <span class=s2>&#34;/K8S Training&#34;</span> --basefolder <span class=s2>&#34;%DRIVE_NAME%:\VMs&#34;</span> --register</span></span></code></pre></div><ul><li>Mac or Linux (Need to test)</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl> <span class=nv>DRIVE_NAME</span><span class=o>=</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span>
</span></span><span class=line><span class=cl> VBoxManage clonevm <span class=s2>&#34;k8s-master-01&#34;</span> --name <span class=s2>&#34;k8s-worker-01&#34;</span> --groups <span class=s2>&#34;/K8S Training&#34;</span> --basefolder <span class=si>${</span><span class=nv>DRIVE_NAME</span><span class=si>}</span>/VMs<span class=s2>&#34; --register</span></span></span></code></pre></div><h5 id=start-vms-one-by-one-and-perform-below>Start VMs one by one and perform below</h5><h5 id=execute-below-steps-on-both-master-and-worker-nodes>Execute below steps on both master and worker nodes</h5><ul><li>Assign IP address and make sure it comes up at boot time.</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo systemctl stop networking
</span></span><span class=line><span class=cl>$ sudo vi /etc/network/interfaces</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-properties data-lang=properties><span class=line><span class=cl><span class=na>auto</span> <span class=s>enp0s3 #&lt;-- Make sure to use HostOnly interface (it can also be enp0s8)</span>
</span></span><span class=line><span class=cl><span class=na>iface</span> <span class=s>enp0s3 inet static</span>
</span></span><span class=line><span class=cl>    <span class=na>address</span> <span class=s>192.168.56.X #&lt;--- Replace X with corresponding IP octet</span>
</span></span><span class=line><span class=cl>    <span class=na>netmask</span> <span class=s>255.255.255.0</span></span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo systemctl restart networking</span></span></code></pre></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>You may access the VM using the IP via SSH and can complete all remaining steps from that session (for copy paste :) )</p></div></div><ul><li>Change Host name</li></ul><h5 id=execute-below-steps-only-on-worker-node>Execute below steps only on worker node</h5><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ <span class=nv>HOST_NAME</span><span class=o>=</span>&lt;host name&gt; <span class=c1># &lt;--- Replace &lt;host name&gt; with corresponding one</span></span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo hostnamectl set-hostname <span class=si>${</span><span class=nv>HOST_NAME</span><span class=si>}</span> --static --transient</span></span></code></pre></div><ul><li>Regenrate SSH Keys</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo /bin/rm -v /etc/ssh/ssh_host_*
</span></span><span class=line><span class=cl>$ sudo dpkg-reconfigure openssh-server</span></span></code></pre></div><ul><li>Change iSCSI initiator IQN</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo vi /etc/iscsi/initiatorname.iscsi</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nv>InitiatorName</span><span class=o>=</span>iqn.1993-08.org.debian:01:HOST_NAME  <span class=c1>#&lt;--- Append HostName to have unique iscsi iqn</span></span></span></code></pre></div><ul><li>Change Machine UUID</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo rm /etc/machine-id /var/lib/dbus/machine-id
</span></span><span class=line><span class=cl>$ sudo systemd-machine-id-setup</span></span></code></pre></div><h5 id=execute-below-steps-on-both-master-and-worker-nodes-1>Execute below steps on both master and worker nodes</h5><ul><li><p>Remove 127.0.1.1 entry from /etc/hosts</p></li><li><p>Add needed entries in /etc/hosts</p></li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo bash -c  <span class=s2>&#34;cat &lt;&lt;EOF &gt;&gt;/etc/hosts
</span></span></span><span class=line><span class=cl><span class=s2>192.168.56.201 k8s-master-01
</span></span></span><span class=line><span class=cl><span class=s2>192.168.56.202 k8s-worker-01
</span></span></span><span class=line><span class=cl><span class=s2>EOF&#34;</span></span></span></code></pre></div><ul><li>Add public DNS incase the local one is not responding in NAT</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo bash -c  <span class=s2>&#34;cat &lt;&lt;EOF &gt;&gt;/etc/resolvconf/resolv.conf.d/tail
</span></span></span><span class=line><span class=cl><span class=s2>nameserver 8.8.8.8
</span></span></span><span class=line><span class=cl><span class=s2>EOF&#34;</span></span></span></code></pre></div><ul><li>Disable swap by commenting out swap_1 LV</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo vi /etc/fstab</span></span></code></pre></div><div class="wrap-code highlight"><pre tabindex=0><code># /dev/mapper/k8s--master--01--vg-swap_1 none            swap    sw              0       0</code></pre></div><ul><li>Reboot VMs</li></ul><div class="wrap-code highlight"><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ sudo reboot</span></span></code></pre></div><div class="box notices cstyle note"><div class=box-label><i class="fa-fw fas fa-exclamation-circle"></i> Note</div><div class=box-content><p>Do a ping test to make sure both VMs can reach each other.</p></div></div><footer class=footline></footer></article><script src=https://giscus.app/client.js data-repo=ansilh/kubernetes.github.io data-repo-id=R_kgDOLB2cOA data-category=Announcements data-category-id=DIC_kwDOLB2cOM4CcQpH data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></main></div><script src=../../js/clipboard.min.js?1704656421 defer></script><script src=../../js/perfect-scrollbar.min.js?1704656421 defer></script><script src=../../js/theme.js?1704656421 defer></script></body></html>